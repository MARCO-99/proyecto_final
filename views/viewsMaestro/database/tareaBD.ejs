<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Tareas de Bases de Datos</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="../resources/img/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script
      src="https://use.fontawesome.com/releases/v5.15.1/js/all.js"
      crossorigin="anonymous"
    ></script>
    <!-- Google fonts-->
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Third party plugin CSS-->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"
      rel="stylesheet"
    />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="resources/styles.css" rel="stylesheet" />
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <!-- Bootstrap CSS -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

  </head>
  <body id="page-top">
    
    <!-- Navigation-->
    <nav
      class="navbar navbar-expand-lg navbar-primary fixed-top py-3"
      id="mainNav"
    >
      <div class="container">
        <a class="navbar-brand js-scroll-trigger text-dark" href="#page-top">UPMP</a>
        <button
          class="navbar-toggler navbar-toggler-right"
          type="button"
          data-toggle="collapse"
          data-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto my-2 my-lg-0">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger text-dark" href="/basededatos"
                >Bases de Datos</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger text-dark" href="/"
                >Materias</a
              >
            </li>

            <li class="nav-item">
              <a class="nav-link js-scroll-trigger text-dark" href="/logout">Salir</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    
    <!-- Services-->
    <section class="page-section" id="services">
        <div class="container">
            
            
            <h2 class="text-center mt-0">Tareas de Bases de Datos</h2>
            <hr class="divider my-3" />
            
        </div>
        
    </section>
    
    <!-- codigo de tablas Aqui -->
    <div class="container">
      <a href="/nuevaTareaDB" class='btn btn-outline-primary mt 4' style="background-color: coral"><i class='bx bx-plus-circle bx-md'></i></a>
      <!-- tabla -->
      <table class=" table table-bordered table table striped text-center mt-4">
          <!-- encabezados -->
          <thead>
              <tr class="bg-primary text-white">
                  <th scope="col">ID</th>
                  <th scope="col">DESCRIPCION</th>
                  <th scope="col">FECHA ENTREGA</th>
                  <th scope="col">ASIGNAR CALIFICACION</th>
                  <th scope="col">ACCIONES</th>
                  </tr>
          </thead>
          <!-- filas y columnas -->
          <tbody>
              <% resultados.forEach((data)=>{ %>
              <tr>
                  <input id="id_tarea" name="id_tarea" value="<%= data.id_tarea %>" hidden>
                  <td ><%= data.id_tarea %></td>
                  <td ><%= data.descripcion %></td>
                  <td ><%= data.fecha_de_entrega %></td>
                  <td>
                    <a href="calificacionesTareasDB/<%= data.id_tarea %>" class="btn btn-outline-info" style="background-color: rgb(29, 116, 216); color: white;">Alumnos</a>
                  </td>
                  <td>
                      <!-- video 3 min 11:26 -->
                      <a onclick="edicion(<%= data.id_tarea%>)" class="btn btn-outline-info" style="background-color: rgb(29, 116, 216); color: white;">Editar</a>
                      <a onclick="confirmar(<%= data.id_tarea %>)" class="btn btn-outline-info"  style="background-color: rgb(211, 44, 72); color: white;">Borrar</a>
                  </td>
              </tr>
              <% }) %>  
          </tbody>
      </table>
  </div>







    <!-- Bootstrap core JS-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <!-- Core theme JS-->
    <script src="../controllers/scripts.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <!-- SWEET ALERT -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6/dist/sweetalert2.all.min.js"></script>
    
    <script>
      function edicion(id){
        window.location = '/editarTareasDB/'+id;
      }
    </script>
    <script>
      function confirmar(id){
        Swal.fire({
          title: 'Se borrara un registro',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Si, borrar'
          }).then((result) => {
          if (result.isConfirmed) {
           window.location = '/deleteTarea/'+id;
          }
        })
      }
    </script>
  </body>
</html>
